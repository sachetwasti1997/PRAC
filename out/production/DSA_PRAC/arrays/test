class Solution {
  fun trap(height: IntArray): Int {
    var left = 0
    val arr_left = IntArray(height.size)
    val arr_right = IntArray(height.size)
    for (i in height.indices) {
      left = left.coerceAtLeast(height[i])
      arr_left[i] = left
    }
    left = arr_right[height.size-1]
    for (i in height.length - 1 downTo 0) {
      left = left.coerceAtLeast(height[i])
      arr_right[i] = left
    }
    int res = 0
    for (i in height.indices) {
      res += arr_left[i].coerceAtMost(arr_right[i]) - height[i]
    }
    return res
  }
}